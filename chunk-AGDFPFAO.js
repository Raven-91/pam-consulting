import{F as n,R as p,d as s,t as r}from"./chunk-WKWOGJ7G.js";var c=class i{srcPath;el=r(n);supportsWebp=!1;ngOnInit(){return s(this,null,function*(){this.supportsWebp=yield this.checkWebpSupport(),yield this.setImage()})}checkWebpSupport(){return new Promise(t=>{let e=new Image;e.onload=()=>t(e.width>0&&e.height>0),e.onerror=()=>t(!1),e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEAAkA4JZQAA3AA/vuUAAA="})}setImage(){return s(this,null,function*(){let t=this.el.nativeElement;if(this.srcPath.endsWith(".svg")){t.src=`images/svg/${this.srcPath}`;return}if(this.srcPath.endsWith(".webp")){t.src=`images/webp/${this.srcPath}`;return}let e=`images/jpeg/${this.srcPath}`,a=`images/webp/${this.srcPath.replace(/\.(jpg|jpeg|png)$/i,".webp")}`;if(this.supportsWebp){let o=yield this.checkFileExists(a);t.src=o?a:e}else t.src=e})}checkFileExists(t){return s(this,null,function*(){try{return(yield fetch(t,{method:"HEAD"})).ok}catch{return!1}})}static \u0275fac=function(e){return new(e||i)};static \u0275dir=p({type:i,selectors:[["","appWebpImage",""]],inputs:{srcPath:[0,"appWebpImage","srcPath"]}})};export{c as a};
